<div class="catalog-container ">
  <h2 class="catalog-title">Product Catalog</h2>

  <!-- Loading spinner -->
  <div *ngIf="loading()" class="loading-container">
    <div class="spinner"></div>
    <span class="visually-hidden">Loading...</span>
  </div>

  <!-- Search and Category Filter -->
  <div class="filter-container" *ngIf="!loading()">
    <input
      type="text"
      placeholder="Search products..."
      [(ngModel)]="searchTerm"
      class="filter-input"
    />
    <select [(ngModel)]="selectedCategory" class="filter-select">
      <option value="">All Categories</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
  </div>

  <!-- Products Grid -->
  <div class="products-grid" *ngIf="!loading() && filteredProducts().length">
    <div *ngFor="let product of filteredProducts()" class="product-card">
      <!-- Display first image from images array -->
      <img [src]="product.images[0]" [alt]="product.name" class="product-image" />

 <!-- Favorite icon -->
  <button
    class="favorite-btn"
    (click)="favoritesService.toggleFavorite(product.id); $event.stopPropagation()"
    [class.active]="favoritesService.isFavorite(product.id)"
    aria-label="Toggle favorite"
  >
    â™¥
  </button>

      <div class="product-info">
        <h5 class="product-name">{{ product.name }}</h5>
        <p class="product-description">{{ product.description }}</p>
        <p class="product-price">R {{ product.price | number:'1.2-2' }}</p>
        <button class="product-btn" [routerLink]="['/product', product.id]">View Details</button>
      </div>
    </div>
  </div>

  <!-- No products message -->
  <div *ngIf="!loading() && filteredProducts().length === 0" class="text-center py-5">
    <p>No products found.</p>
  </div>
</div>
